<!doctype html>
<html lang="en">
  <head>
    <%- include('./partials/head')%>
    <title>Blog <%=blog.title%></title>
  </head>
  <body>
    <%- include('./partials/scripts')%>
    <%- include('./partials/nav')%>
    <div class="container mt-4">
        <div style="text-align: center;">
          <h1><%=blog.title%></h1>
            <br>
            <img src="<%=blog.coverImageURL%>" alt="src" style="display: inline-block;">
        </div>
        <pre><%=blog.body%></pre>
    </div>
  

    <div class="container mt-3">
      <img src="<%= blog.createdBy.profileImageURL%>" width="50px">
      <pre><%=blog.createdBy.fullName %></pre>
    </div>
    <div class="container mt-4">
      <h1>Comments (<%=comments.length%>)</h1>
      
    <!--Allowing signed in user to publish his/her comment-->
      <%if(locals.user){%>
      <form action="/blog/comment/<%= blog._id %>" method="POST">
        <div class="mb-4">
          <input type="text" class="form-control" id="content" aria-describedby="content" name="content" placeholder="Your comment...">
        </div>
        <button type="submit" class="btn btn-primary">Add</button>
      </form>
      <%}%>
      <!--Displaying all the comments to the user irrespective of signed in status-->
      <div class="container mt-3">
      <%comments.forEach(comment => {%>
        <img src="<%= comment.createdBy.profileImageURL%>" width="50px">
        <%=comment.createdBy.fullName%>
        <pre><%=comment.content%></pre>
      <%});%>
      </div>
    </div>
  </body>
</html>